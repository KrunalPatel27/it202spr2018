<!DOCTYPE HTML>
<html>
  <head>
    <style>
      body {
        margin: 0px;
        padding: 0px;
      }
    </style>
    <title>Lab 3</title>
  </head>
  <body>
    <canvas id="myCanvas" width="578" height="400"></canvas>
    <script>
    
      var c = document.getElementById('myCanvas');
      var ctx = c.getContext('2d');
      var imageObj = new Image();
      var playerImage = new Image();
       
      imageObj.onload = function() {
        ctx.drawImage(imageObj, 0 ,0);
        ctx.drawImage(player, 30,30, player.width * 0.3, player.height * 0.3);
        };
      imageObj.src = 'assets/space.jpeg'
      player.src = 'assets/ball.png'
      
      var game = {lives: 3, score: 0};
     
    
      var harm = {x: c.width, y:100 , color: "blue", radius: 25};
      
      
      function draw() {
        
        ctx.clearRect(0,0,c.width,c.height);
        
        ctx.drawImage(imageObj, 0 ,0);
        ctx.drawImage(player, 30,30, player.width * 0.3, player.height * 0.3);
        ctx.fillStyle = "white";
        ctx.fillText("Score: " + game.score + "  Lives: " + game.lives , c.width-120, 20);
        // draw harm
        harm.x--;
        
        if (harm.x <= 0) {
          harm.x = c.width;
        }
        
        ctx.fillStyle = harm.color;
        
        ctx.arc(harm.x,harm.y,harm.radius,0,2*Math.PI);
        ctx.fill();
        
        // collision check, using code from 
        //   https://developer.mozilla.org/en-US/docs/Games/Techniques/2D_collision_detection
        
        var dx = player.x - harm.x;
        var dy = player.y - harm.y;
        var distance = Math.sqrt(dx * dx + dy * dy);
        
        if (distance < player.radius + harm.radius) {
            // collision detected!
            console.log("collision");
            
            harm.x = c.width;   // reposition harm 
            game.lives--;       // reduce lives
            
            // TODO: handle game over condition
            
            
           
        }
        
        
        // TODO:  draw benefit
        
        
        
        
        
        
        // draw player
        
        
        
        
        // TODO:  draw score and lives
      
        
      
      
      
        requestAnimationFrame(draw);
      }
      
      
      
      
      draw();
    
    
    </script>
  </body>
</html> 